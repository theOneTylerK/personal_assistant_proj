@{
    ViewBag.Title = "Home Page";
}


<h1>Talk To Alfred</h1>
@{
    ViewData["Title"] = "Alfred";
}
@*@Scripts.Render("~/bundles/jquery");*@

<form>
    <div class="jumbotron" ; style="opacity: 0.8;">
        <div class="row">
            <div class="col-sm-4">
                <textarea id="userResponse" rows="5"></textarea>
            </div>
            <div class="col-sm-4" , id="alfredResponse"></div>
            <div class="col-sm-4"></div>
        </div>
    </div>
</form>

<br />
<br />
    <script>
        $("#userResponse").on("change", function () {
            alert("notice change");
        });
    </script>
<div>
    <form id="my-form" class="simple-form">
        <input type="text" name="userMessage" placeholder="Talk to Alfred here" />
        <button type="button" id="button1" onclick="alfredTalk()">Send Message</button>
        <button type="button" id="button1" onclick="startListening()">Use Speech Recognition</button>
    </form>
</div>
<script src="~/js/NewAlfred.js"></script>

<script>
    window.SpeechRecognition = window.webkitSpeechRecognition || window.SpeechRecognition;
    let finalTranscript = '';
    let recognition = new window.SpeechRecognition();
    recognition.interimResults = true;
    recognition.maxAlternatives = 10;
    recognition.continuous = false;
    recognition.onresult = (event) => {
        let interimTranscript = '';
        for (let i = event.resultIndex, len = event.results.length; i < len; i++) {
            let transcript = event.results[i][0].transcript;
            if (event.results[i].isFinal) {
                finalTranscript += transcript;
            } else {
                interimTranscript += transcript;
            }
        }

        document.getElementById('userResponse').innerHTML = finalTranscript + interimTranscript;
    }
    function startListening() {
        recognition.start();
    }

</script>

